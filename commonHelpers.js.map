{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '43214760-0343bbd140b24677312cd0c55';\nlet page = 1;\nconst per_page = 15; // Кількість зображень на сторінці\nlet currentKeyword = '';\n\nexport async function fetchImages(keyword, pageNum) {\n  try {\n    // Перевірка чи потрібно повернутися до початкової сторінки при новому запиті\n    if (keyword !== currentKeyword) {\n      currentKeyword = keyword;\n      page = 1; // Скидаємо сторінку до початкового значення при новому пошуку\n    } else {\n      page = pageNum; // Встановлюємо поточну сторінку для пагінації\n    }\n\n    const url = `https://pixabay.com/api/?key=${apiKey}&q=${keyword}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${per_page}`;\n    const response = await axios.get(url);\n\n    if (response.status !== 200) {\n      throw new Error('Network response was not ok');\n    }\n\n    return response.data.hits;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    return [];\n  }\n}\n","export function clearGallery() {\n  const galleryElement = document.querySelector('.gallery');\n  galleryElement.innerHTML = '';\n}\n\nexport function createMarkup(images) {\n  const galleryElement = document.querySelector('.gallery');\n  const markup = images\n    .map(\n      image => `<li class=\"card\">\n      <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery-item\">\n        <img class=\"contentCard\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n      </a>\n      <div class=\"imgCard\">\n        <p><b>Likes:</b> ${image.likes}</p>\n        <p><b>Views:</b> ${image.views}</p>\n        <p><b>Comments:</b> ${image.comments}</p>\n        <p><b>Downloads:</b> ${image.downloads}</p>\n      </div>\n    </li>`\n    )\n    .join('');\n\n  galleryElement.insertAdjacentHTML('beforeend', markup);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\nimport { fetchImages } from '../src/js/pixabay-api.js';\nimport { clearGallery, createMarkup } from '../src/js/render-functions.js';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-input');\nconst loader = document.querySelector('.loader');\nconst btnLoad = document.querySelector('.js-load-more');\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  const keyword = searchInput.value.trim();\n  if (!keyword) {\n    iziToast.error({\n      position: 'topRight',\n      title: 'Error',\n      message: 'Please enter a keyword for search.',\n    });\n    return;\n  }\n  loader.style.display = 'block';\n  clearGallery();\n  try {\n    const images = await fetchImages(keyword, 1); // Починаємо з першої сторінки\n    if (images.length === 0) {\n      iziToast.info({\n        position: 'topRight',\n        title: 'Info',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      createMarkup(images);\n      lightbox.refresh();\n      // Показуємо кнопку \"Load more\", якщо отримано зображення\n      btnLoad.classList.remove('load-more-hidden');\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n      position: 'topRight',\n      title: 'Error',\n      message:\n        'An error occurred while fetching images. Please try again later.',\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n});\n\n// Додаємо обробник події для кнопки \"Load more\"\nbtnLoad.addEventListener('click', async () => {\n  const keyword = searchInput.value.trim();\n  if (!keyword) {\n    iziToast.error({\n      position: 'topRight',\n      title: 'Error',\n      message: 'Please enter a keyword for search.',\n    });\n    return;\n  }\n  // loader.style.display = 'block';\n  try {\n    const images = await fetchImages(keyword, 2); // Починаємо з другої сторінки\n    if (images.length === 0) {\n      alert('No more images available.');\n    } else {\n      createMarkup(images);\n      lightbox.refresh();\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n      position: 'topRight',\n      title: 'Error',\n      message:\n        'An error occurred while fetching images. Please try again later.',\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n});\n"],"names":["apiKey","page","per_page","currentKeyword","fetchImages","keyword","pageNum","url","response","axios","error","clearGallery","galleryElement","createMarkup","images","markup","image","lightbox","SimpleLightbox","searchForm","searchInput","loader","btnLoad","event","iziToast"],"mappings":"owBAEA,MAAMA,EAAS,qCACf,IAAIC,EAAO,EACX,MAAMC,EAAW,GACjB,IAAIC,EAAiB,GAEd,eAAeC,EAAYC,EAASC,EAAS,CAClD,GAAI,CAEED,IAAYF,GACdA,EAAiBE,EACjBJ,EAAO,GAEPA,EAAOK,EAGT,MAAMC,EAAM,gCAAgCP,CAAM,MAAMK,CAAO,iEAAiEJ,CAAI,aAAaC,CAAQ,GACnJM,EAAW,MAAMC,EAAM,IAAIF,CAAG,EAEpC,GAAIC,EAAS,SAAW,IACtB,MAAM,IAAI,MAAM,6BAA6B,EAG/C,OAAOA,EAAS,KAAK,IACtB,OAAQE,EAAO,CACd,eAAQ,MAAM,yBAA0BA,CAAK,EACtC,EACR,CACH,CC7BO,SAASC,GAAe,CAC7B,MAAMC,EAAiB,SAAS,cAAc,UAAU,EACxDA,EAAe,UAAY,EAC7B,CAEO,SAASC,EAAaC,EAAQ,CACnC,MAAMF,EAAiB,SAAS,cAAc,UAAU,EAClDG,EAASD,EACZ,IACCE,GAAS;AAAA,iBACEA,EAAM,aAAa;AAAA,wCACIA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,2BAGnDA,EAAM,KAAK;AAAA,2BACXA,EAAM,KAAK;AAAA,8BACRA,EAAM,QAAQ;AAAA,+BACbA,EAAM,SAAS;AAAA;AAAA,UAGzC,EACA,KAAK,EAAE,EAEVJ,EAAe,mBAAmB,YAAaG,CAAM,CACvD,CChBA,MAAME,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EACKC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,eAAe,EAEtDH,EAAW,iBAAiB,SAAU,MAAMI,GAAS,CACnDA,EAAM,eAAc,EACpB,MAAMlB,EAAUe,EAAY,MAAM,KAAI,EACtC,GAAI,CAACf,EAAS,CACZmB,EAAS,MAAM,CACb,SAAU,WACV,MAAO,QACP,QAAS,oCACf,CAAK,EACD,MACD,CACDH,EAAO,MAAM,QAAU,QACvBV,IACA,GAAI,CACF,MAAMG,EAAS,MAAMV,EAAYC,EAAS,CAAC,EACvCS,EAAO,SAAW,EACpBU,EAAS,KAAK,CACZ,SAAU,WACV,MAAO,OACP,QACE,0EACV,CAAO,GAEDX,EAAaC,CAAM,EACnBG,EAAS,QAAO,EAEhBK,EAAQ,UAAU,OAAO,kBAAkB,EAE9C,OAAQZ,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7Cc,EAAS,MAAM,CACb,SAAU,WACV,MAAO,QACP,QACE,kEACR,CAAK,CACL,QAAY,CACRH,EAAO,MAAM,QAAU,MACxB,CACH,CAAC,EAGDC,EAAQ,iBAAiB,QAAS,SAAY,CAC5C,MAAMjB,EAAUe,EAAY,MAAM,KAAI,EACtC,GAAI,CAACf,EAAS,CACZmB,EAAS,MAAM,CACb,SAAU,WACV,MAAO,QACP,QAAS,oCACf,CAAK,EACD,MACD,CAED,GAAI,CACF,MAAMV,EAAS,MAAMV,EAAYC,EAAS,CAAC,EACvCS,EAAO,SAAW,EACpB,MAAM,2BAA2B,GAEjCD,EAAaC,CAAM,EACnBG,EAAS,QAAO,EAEnB,OAAQP,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7Cc,EAAS,MAAM,CACb,SAAU,WACV,MAAO,QACP,QACE,kEACR,CAAK,CACL,QAAY,CACRH,EAAO,MAAM,QAAU,MACxB,CACH,CAAC"}